<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Duliz's Blog"><title>执行环境及作用域 | 学习园地</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.3"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.3"></script><script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.3"></script><link rel="stylesheet" type="text/css" href="/css/kityminder.core.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/kityminder.css?v=2.0.3"><script type="text/javascript" src="/js/kity.min.js?v=2.0.3"></script><script type="text/javascript" src="/js/kityminder.core.js?v=2.0.3"></script><script type="text/javascript" src="/js/mind.js?v=2.0.3"></script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">执行环境及作用域</h1><a id="logo" href="/.">学习园地</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">执行环境及作用域</h1><div class="post-meta"><a href="/2019/05/18/执行环境及作用域/#comments" class="comment-count"></a><p><span class="date">May 18, 2019</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h3 id="执行环境-执行上下文"><a href="#执行环境-执行上下文" class="headerlink" title="执行环境(执行上下文)"></a>执行环境(执行上下文)</h3><ul>
<li><p>概念：执行环境定义了变量和函数有权访问的其他数据，决定了他们各自的行为。  </p>
</li>
<li><p>分类：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">环境</th>
<th style="text-align:center">对象</th>
<th style="text-align:center">内容</th>
<th style="text-align:center">何时销毁</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">全局执行环境</td>
<td style="text-align:center">window对象</td>
<td style="text-align:center">函数声明、变量</td>
<td style="text-align:center">退出程序后销毁</td>
</tr>
<tr>
<td style="text-align:center">函数执行环境</td>
<td style="text-align:center">活动对象</td>
<td style="text-align:center">作用域链、this、arguments、当前执行代码所在环境的变量对象</td>
<td style="text-align:center">执行完毕后销毁</td>
</tr>
</tbody>
</table>
<h3 id="变量对象"><a href="#变量对象" class="headerlink" title="变量对象"></a>变量对象</h3><ul>
<li>概念：保存环境中定义的所有变量和函数  </li>
</ul>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><ul>
<li><p>概念：当代码在一个环境中执行的时候，会<strong>最终形成</strong>变量对象的一个作用域链   </p>
</li>
<li><p>作用：保证对执行环境有权访问的所有变量和函数的有序访问    </p>
</li>
<li><p>本质：一个指向变量对象的<strong>指针列表</strong>    </p>
</li>
<li><p>函数的作用域链     </p>
</li>
</ul>
<blockquote>
<p>全局执行环境  </p>
<blockquote>
<p>包含的外部环境   ↑</p>
<blockquote>
<p>活动对象(当前执行代码所在环境的变量对象+arguments对象)  ↑  </p>
</blockquote>
</blockquote>
</blockquote>
<h4 id="一个无嵌套函数执行过程的分析"><a href="#一个无嵌套函数执行过程的分析" class="headerlink" title="一个无嵌套函数执行过程的分析"></a>一个无嵌套函数执行过程的分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function compare(v1,v2)&#123;</span><br><span class="line">        if(v1&lt;v2)&#123;</span><br><span class="line">            return -1</span><br><span class="line">        &#125;else if(v1&gt;v2)&#123;</span><br><span class="line">            return 1</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return 0</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="作用域对象-Scopes"><a href="#作用域对象-Scopes" class="headerlink" title="作用域对象[[Scopes]]"></a>作用域对象[[Scopes]]</h3><p>概念：当compare函数被创建的时候,comparec的标识符（identifier）就被加到了当前的作用域对象中（在这里就是全局对象），并且这个标识符所引用的是一个函数对象（function object）。函数对象中所包含的是函数的源代码以及其他的属性。其中一个就是内部属性[[scope]]。[[scope]]所指向的就是当前的作用域对象。也就是指的就是函数的标识符被创建的时候，我们所能够直接访问的那个作用域对象（在这里就是全局对象）。  </p>
<blockquote>
<p>“直接访问”的意思就是，在当前作用域链中，该作用域对象处于最底层，没有子作用域对象。</p>
</blockquote>
<p>1.compare创建时，先创建一个预先包含全局变量对象的作用域对象，这个作用域被保存在[[Scopes]]属性中。<br>2.compare调用时会创建一个执行环境，然后通过复制Scopes对象构建起执行环境的作用域链。然后又创建compare执行环境的活动对象【compare scope】，并将其推入到作用域链的前端。<br>3.compare执行完毕时，如果没有被其他对象引用，则compare的作用域链对象【compare scope】将被销毁<br><!-- &#8195;&#8195; --></p>
<h4 id="函数作用域与闭包"><a href="#函数作用域与闭包" class="headerlink" title="函数作用域与闭包"></a>函数作用域与闭包</h4><ul>
<li><p>闭包概念<br>闭包是指有权访问另一个函数作用域的变量的函数  </p>
</li>
<li><p>创建方式<br>在一个函数内部创建另一个函数  </p>
</li>
</ul>
<h4 id="一个嵌套函数-闭包-执行过程的分析"><a href="#一个嵌套函数-闭包-执行过程的分析" class="headerlink" title="一个嵌套函数(闭包)执行过程的分析"></a>一个嵌套函数(闭包)执行过程的分析</h4><h4 id="闭包产生的问题1—占用内存"><a href="#闭包产生的问题1—占用内存" class="headerlink" title="闭包产生的问题1—占用内存"></a>闭包产生的问题1—占用内存</h4><p>当一个函数返回后，如果没有其他对象保存对其的引用，那么它就可能被垃圾回收器回收。但是如果我们在函数当中定义嵌套的函数并且返回，这个嵌套的函数的[[scope]]就会引用外围函数（Outer function）的当前作用域对象。如果我们将这个嵌套函数返回，并被另外一个地方的标识符所引用的话，那么这个嵌套函数及其[[scope]]所引用的作用域对象就不会被垃圾回收所销毁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function createComparisonFunction(propertyName)&#123;</span><br><span class="line">    return function(obj1,obj2)&#123;</span><br><span class="line">        var v1=obj1[propertyName];</span><br><span class="line">        var v2=obj2[propertyName];</span><br><span class="line">        if(v1&lt;v2)&#123;</span><br><span class="line">            return -1</span><br><span class="line">        &#125;else if(v1&gt;v2)&#123;</span><br><span class="line">            return 1</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var compare = createComparisonFunction(&apos;name&apos;);</span><br><span class="line">var result = compare(&#123;name:&apos;zzz&apos;&#125;,&#123;name:&apos;ccc&apos;&#125;);</span><br><span class="line">compare = null;//解除对匿名函数的引用</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/005ANJbJgy1g2xglaa6rpj30ps0cj0vh.jpg" alt="7-2">  </p>
<p>例子1:  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var add=function(x)&#123;</span><br><span class="line">    var sum=0;</span><br><span class="line">    var temp=function(x)&#123;</span><br><span class="line">        sum = sum + x;</span><br><span class="line">        return temp;</span><br><span class="line">    &#125;;</span><br><span class="line">    temp.toString = function()&#123;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;;</span><br><span class="line">    return temp</span><br><span class="line">&#125;;</span><br><span class="line">console.log(add(100)(2)(5))//7</span><br></pre></td></tr></table></figure>
<p>add(100)返回的是temp函数，函数里面返回temp  </p>
<h4 id="闭包产生的问题2—变量对象的值"><a href="#闭包产生的问题2—变量对象的值" class="headerlink" title="闭包产生的问题2—变量对象的值"></a>闭包产生的问题2—变量对象的值</h4><ul>
<li>原因：闭包只能取得包含函数中任何变量的最后一个值  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">例子1.</span><br><span class="line">function createFunction()&#123;</span><br><span class="line">    var result = new Array();</span><br><span class="line">    for(var i=0;i&lt;10;i++)&#123;</span><br><span class="line">        result[i] = function()&#123;</span><br><span class="line">            return i //所有都为10</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">例子2.</span><br><span class="line">var i,a;</span><br><span class="line">for(i =0;i&lt;10;i++)&#123;</span><br><span class="line">    a=document.createElement(&apos;a&apos;);</span><br><span class="line">    a.innerHTML=i+&apos;&lt;br&gt;&apos;;</span><br><span class="line">    a.addEventListener(&apos;click&apos;,function(e)&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        alert(i)//80</span><br><span class="line">    &#125;);</span><br><span class="line">    document.body.appendChild(a)</span><br><span class="line">&#125;</span><br><span class="line">i=80</span><br></pre></td></tr></table></figure>
<p>匿名函数中的i都是引用createFunction的活动对象中的同一个i,当createFunction执行返回的时候，此时i已经变为10。</p>
<ul>
<li>2019-12-17补充<br>产生这个原因和var也有关系<br>“变量i是var命令声明的，在全局范围内都有效，所以全局只有一个变量i。每一次循环，变量i的值都会发生改变，而循环内被赋给函数内部的i，里面的i指向的就是全局的i。也就是说，所有数组a的成员里面的i，指向的都是同一个i，导致运行时输出的是最后一轮的i的值，也就是 10。”</li>
</ul>
<ul>
<li>修改方法—块级作用域  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function createFunction()&#123;</span><br><span class="line">    var result = new Array();</span><br><span class="line">    for(var i=0;i&lt;10;i++)&#123;</span><br><span class="line">        result[i] = function(num)&#123;//关键点：块级作用域，函数参数按值传递</span><br><span class="line">            return function()&#123;</span><br><span class="line">                return num </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;;</span><br><span class="line">    return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>闭包使用场景  </li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/005ANJbJgy1g2xkiyxvf8j30n00ejq6s.jpg" alt="闭包使用场景"></p>
<h3 id="块级作用域（立即执行的闭包函数）"><a href="#块级作用域（立即执行的闭包函数）" class="headerlink" title="块级作用域（立即执行的闭包函数）"></a>块级作用域（立即执行的闭包函数）</h3><h4 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h4><p><img src="http://ww1.sinaimg.cn/large/005ANJbJgy1g2yq61f8opj30s90ieq7j.jpg" alt="变量提升">  </p>
<ul>
<li>由于js本身并没有块级作用域的概念，因此就会出现一下的情况    </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function outputNumber(count)&#123;</span><br><span class="line">    for(var i=0;i&lt;count;i++)&#123;</span><br><span class="line">        console.log(i)</span><br><span class="line">    &#125;;</span><br><span class="line">    var i;//变量i被提升到for循环之前</span><br><span class="line">    console.log(i)//5,在for循环外面依旧可以访问到i的值</span><br><span class="line">   </span><br><span class="line">&#125;;</span><br><span class="line"> outputNumber(5)</span><br></pre></td></tr></table></figure>
<ul>
<li>块级作用域的基本写法  </li>
</ul>
<p><code>(function(i){})(i) //其实和普通调用函数是一样的，但是匿名函数没有name属性</code><br>或<br><code>var block = function(i){}(i)</code> </p>
<h4 id="模块模式（模块化基础）"><a href="#模块模式（模块化基础）" class="headerlink" title="模块模式（模块化基础）"></a>模块模式（模块化基础）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var modules=function()&#123;</span><br><span class="line">    var privateValue = 1;  </span><br><span class="line">    function privateFunction()&#123;</span><br><span class="line">        return privateValue</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">        privateVersion:1,</span><br><span class="line">        privateFunction:function()&#123;</span><br><span class="line">            privateValue++;</span><br><span class="line">            return privateFunction()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<p>例:Jquery声明$函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 使用函数自执行的方式创建模块</span><br><span class="line">(function(window, undefined) &#123;</span><br><span class="line"></span><br><span class="line">    // 声明jQuery构造函数</span><br><span class="line">     var jQuery = function(name) &#123;</span><br><span class="line"></span><br><span class="line">        // 主动在构造函数中，返回一个jQuery实例</span><br><span class="line">         return new jQuery.fn.init(name);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    // 添加原型方法</span><br><span class="line">     jQuery.prototype = jQuery.fn = &#123;</span><br><span class="line">         constructor: jQuery,</span><br><span class="line">         init:function() &#123; ... &#125;,</span><br><span class="line">         css: function() &#123; ... &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     jQuery.fn.init.prototype = jQuery.fn;</span><br><span class="line"></span><br><span class="line">    // 将jQuery改名为$，并将引用保存在window上，形成闭包，对外开发jQuery构造函数，这样我们就可以访问所有挂载在jQuery原型上的方法了</span><br><span class="line">     window.jQuery = window.$ = jQuery;</span><br><span class="line"> &#125;)(window);</span><br><span class="line"></span><br><span class="line">// 在使用时，我们直接执行了构造函数，因为在jQuery的构造函数中通过一些手段，返回的是jQuery的实例，所以我们就不用再每次用的时候在自己new了</span><br><span class="line">$(&apos;#div1&apos;);</span><br></pre></td></tr></table></figure></p>
<h3 id="模块模式Plus"><a href="#模块模式Plus" class="headerlink" title="模块模式Plus"></a>模块模式Plus</h3><h4 id="宽放大模式"><a href="#宽放大模式" class="headerlink" title="宽放大模式"></a>宽放大模式</h4><ul>
<li>如果一个模块很大，必须分成几个部分，或者一个模块需要继承另一个模块。  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var module1 = ( function (mod)&#123;</span><br><span class="line">　　　　mod.m3 = function () &#123;</span><br><span class="line">　　　　　　//...</span><br><span class="line">　　　　&#125;;</span><br><span class="line">　　　　return mod;</span><br><span class="line">　　&#125;)(window.module1 || &#123;&#125;);//避免module1在未声明赋值时使用</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="ES6-let与块级作用域"><a href="#ES6-let与块级作用域" class="headerlink" title="ES6 let与块级作用域"></a>ES6 let与块级作用域</h3><p>1、用来声明变量,所声明的变量，只在let命令所在的代码块内有效。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;//块级作用域</span><br><span class="line">  let a = 10;</span><br><span class="line">  var b = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a // ReferenceError: a is not defined.</span><br><span class="line">b // 1</span><br><span class="line"></span><br><span class="line">* 注：</span><br><span class="line">for (let i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">  let i = &apos;abc&apos;;</span><br><span class="line">  console.log(i);</span><br><span class="line">&#125;</span><br><span class="line">//abc</span><br><span class="line">//abc</span><br><span class="line">//abc</span><br><span class="line">因为let i = 0是在循环体外声明的</span><br><span class="line">let i = 0</span><br><span class="line">for ( ; i &lt; 3; i++) &#123;</span><br><span class="line">  let i = &apos;abc&apos;;</span><br><span class="line">  console.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2、不存在变量提升<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(bar); // 报错ReferenceError</span><br><span class="line">let bar = 2;</span><br></pre></td></tr></table></figure></p>
<p>3、不允许重复声明</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://yangbo5207.github.io/wutongluo/ji-chu-jin-jie-xi-lie/wu-3001-this.html" target="_blank" rel="noopener">执行上下文</a><br><a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank" rel="noopener">Javascript模块化编程（一）：模块的写法</a><br><a href="https://blog.leapoahead.com/2015/09/15/js-closure/" target="_blank" rel="noopener">JavaScript闭包的底层运行机制</a></p>
</div><div class="post-copyright"><blockquote><p>原文作者: Duliz</p><p>原文链接: <a href="https://duliz.github.io/2019/05/18/执行环境及作用域/">https://duliz.github.io/2019/05/18/执行环境及作用域/</a></p><p>版权声明: 转载请注明出处</p></blockquote></div><div class="tags"><a href="/tags/JS高设笔记/">JS高设笔记</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/05/23/模块化编程/" class="pre">模块化编程</a><a href="/2019/05/12/面向对象程序设计/" class="next">面向对象程序设计</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#执行环境-执行上下文"><span class="toc-text">执行环境(执行上下文)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量对象"><span class="toc-text">变量对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用域链"><span class="toc-text">作用域链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一个无嵌套函数执行过程的分析"><span class="toc-text">一个无嵌套函数执行过程的分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用域对象-Scopes"><span class="toc-text">作用域对象[[Scopes]]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#函数作用域与闭包"><span class="toc-text">函数作用域与闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一个嵌套函数-闭包-执行过程的分析"><span class="toc-text">一个嵌套函数(闭包)执行过程的分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#闭包产生的问题1—占用内存"><span class="toc-text">闭包产生的问题1—占用内存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#闭包产生的问题2—变量对象的值"><span class="toc-text">闭包产生的问题2—变量对象的值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#块级作用域（立即执行的闭包函数）"><span class="toc-text">块级作用域（立即执行的闭包函数）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#变量提升"><span class="toc-text">变量提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模块模式（模块化基础）"><span class="toc-text">模块模式（模块化基础）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块模式Plus"><span class="toc-text">模块模式Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#宽放大模式"><span class="toc-text">宽放大模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-let与块级作用域"><span class="toc-text">ES6 let与块级作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/模块化编程/">模块化编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/18/执行环境及作用域/">执行环境及作用域</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/12/面向对象程序设计/">面向对象程序设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/12/用markdown生成脑图/">用markdown生成脑图</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/08/第一篇hexo-blog-使用hexo与github搭建个人博客/">第一篇 hello Hexo && 使用Hexo与Github搭建个人博客</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/JS高设笔记/" style="font-size: 15px;">JS高设笔记</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/脑图/" style="font-size: 15px;">脑图</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Duliz.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>